<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exemples de Attributes ARIA - Formaci√≥</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    /* Estils per als blocs de codi informatius */
    .code-box {
      background-color: #e3f2fd;
      border: 1px solid #90caf9;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 4px;
      font-family: monospace;
      white-space: pre-wrap;
      overflow-x: auto;
    }
    /* Estils per millorar la visibilitat del focus */
    :focus {
        outline: 3px solid #ff9800; /* Contorn taronja per destacar el focus */
        outline-offset: 4px; /* Separa el contorn de l'element */
    }

    /* Ajustos espec√≠fics per als botons */
    .btn:focus,
    .btn-tab:focus {
        outline: 3px solid #ff9800;
        outline-offset: 4px;
    }

    /* Millora visual men√∫ aria-haspopup */
    #menu-exemple[role="menu"] {
      list-style: none;
      padding: 0.3em 0;
      margin: 0;
    }
    .menuitem-btn {
      display: block;
      width: 100%;
      background: none;
      border: none;
      text-align: left;
      padding: 0.5em 1em;
      font-size: 1em;
      color: #222;
      cursor: pointer;
      border-radius: 0;
      transition: background 0.15s;
    }
    .menuitem-btn:hover, .menuitem-btn:focus {
      background: #e3eafc;
      color: #1976d2;
      outline: none;
    }

    /* Checkbox accessible estilitzat */
    .checkbox-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.7em;
      background: #fff;
      border: 2px solid #1976d2;
      border-radius: 4px;
      padding: 0.4em 1em;
      font-size: 1em;
      color: #222;
      cursor: pointer;
      transition: background 0.15s, border 0.15s;
      position: relative;
      min-width: 120px;
    }
    .checkbox-btn[aria-checked="true"] {
      background: #e3eafc;
      border-color: #388e3c;
    }
    .checkbox-icon {
      display: inline-block;
      width: 1.2em;
      height: 1.2em;
      border: 2px solid #1976d2;
      border-radius: 3px;
      background: #fff;
      margin-right: 0.2em;
      position: relative;
      transition: border-color 0.15s, background 0.15s;
    }
    .checkbox-btn[aria-checked="true"] .checkbox-icon {
      background: #388e3c;
      border-color: #388e3c;
    }
    .checkbox-btn[aria-checked="true"] .checkbox-icon::after {
      content: '';
      display: block;
      position: absolute;
      left: 0.32em;
      top: 0.08em;
      width: 0.35em;
      height: 0.7em;
      border: solid #fff;
      border-width: 0 0.18em 0.18em 0;
      transform: rotate(45deg);
    }
    .checkbox-btn:focus-visible {
      outline: 2px solid #1976d2;
      background: #e3eafc;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-left">
      <a class="btn-back" href="../inici.html" aria-label="Torna enrere">
        <i class="fas fa-arrow-left"></i>
      </a>
      <h1>Exemples de Attributes ARIA</h1>
    </div>
    <nav>
      <ul class="nav-bar">
        <li><a href="./exemple-aria.html">Exemples de Attributes ARIA</a></li>
        <li><a href="./exemple-roles.html">Exemples de Rols ARIA</a></li>
      </ul>
    </nav>
  </header>

  <main class="aria-exemples">
    <!-- Exemple 1: aria-label -->
    <section class="card">
      <h2>Exemple 1: `aria-label`</h2>
      <p>Aquest exemple mostra com utilitzar l'atribut <code>aria-label</code> per proporcionar una etiqueta personalitzada a un element.</p>
      <button class="btn" aria-label="Desa els canvis">üíæ</button>
      <div class="code-box">&lt;button class="btn" aria-label="Desa els canvis"&gt;üíæ&lt;/button&gt;</div>
    </section>

    <!-- Exemple 2: aria-labelledby -->
    <section class="card">
      <h2>Exemple 2: `aria-labelledby`</h2>
      <p>Aquest exemple mostra com utilitzar l'atribut <code>aria-labelledby</code> per associar un element amb una etiqueta externa.</p>
      <div>
        <h3 id="titol-formulari">Formulari de contacte</h3>
        <form aria-labelledby="titol-formulari">
          <label for="nom">Nom:</label>
          <input type="text" id="nom" />
        </form>
      </div>
      <div class="code-box">&lt;h3 id="titol-formulari"&gt;Formulari de contacte&lt;/h3&gt;
&lt;form aria-labelledby="titol-formulari"&gt;
    &lt;label for="nom"&gt;Nom:&lt;/label&gt;
    &lt;input type="text" id="nom" /&gt;
&lt;/form&gt;</div>
    </section>

    <!-- Exemple 3: aria-describedby -->
    <section class="card">
      <h2>Exemple 3: `aria-describedby`</h2>
      <p>Aquest exemple mostra com utilitzar l'atribut <code>aria-describedby</code> per proporcionar una descripci√≥ addicional a un element.</p>
      <form>
        <label for="email">Correu electr√≤nic:</label>
        <input type="email" id="email" aria-describedby="ajuda-email" />
        <div id="ajuda-email">Introdueix un correu electr√≤nic v√†lid.</div>
      </form>
      <div class="code-box">&lt;label for="email"&gt;Correu electr√≤nic:&lt;/label&gt;
&lt;input type="email" id="email" aria-describedby="ajuda-email" /&gt;
&lt;div id="ajuda-email"&gt;Introdueix un correu electr√≤nic v√†lid.&lt;/div&gt;</div>
    </section>

    <!-- Exemple 4: aria-hidden -->
    <section class="card">
      <h2>Exemple 4: `aria-hidden`</h2>
      <p>Aquest exemple mostra com utilitzar l'atribut <code>aria-hidden</code> per amagar un element a tots els productes de suport.</p>
      <div>
        <i class="fas fa-star" aria-hidden="true" style="color: #388e3c;" title="Correcte"></i>
        <span>Valoraci√≥: 5 estrelles</span>
        <span style="color: #388e3c; margin-left: 0.5em; font-size: 0.95em;" aria-hidden="true">‚úîÔ∏è Correcte</span>
      </div>
      <div>
        <i class="fas fa-star" aria-label="filled--star--icon" style="color: #d32f2f;" title="Incorrecte"></i>
        <span>Valoraci√≥: 1 estrella</span>
        <span style="color: #d32f2f; margin-left: 0.5em; font-size: 0.95em;" aria-hidden="true">‚ùå Incorrecte</span>
      </div>
      <div class="code-box">
&lt;!-- Correcte: icona amagada per a lectors de pantalla --&gt;
&lt;div&gt;
  &lt;i class="fas fa-star" aria-hidden="true"&gt;&lt;/i&gt;
  &lt;span&gt;Valoraci√≥: 5 estrelles&lt;/span&gt;
&lt;/div&gt;

&lt;!-- Incorrecte: icona visible per a lectors de pantalla sense context --&gt;
&lt;div&gt;
  &lt;i class="fas fa-star" aria-label="filled--star--icon"&gt;&lt;/i&gt;
  &lt;span&gt;Valoraci√≥: 1 estrella&lt;/span&gt;
&lt;/div&gt;
</div>
    </section>

    <!-- Exemple 5: aria-live -->
    <section class="card">
      <h2>Exemple 5: `aria-live`</h2>
      <p>Aquest exemple mostra com utilitzar l'atribut <code>aria-live</code> per anunciar canvis din√†mics en una regi√≥ de la p√†gina.</p>
      <button style=" margin-bottom: 0;" class="btn" onclick="actualitzarMissatge()">Actualitza missatge (polite)</button>
      <div aria-live="polite" id="live-region" class="alert-box"></div>
      <button style="margin-top: 2rem; margin-bottom: 0;" class="btn" onclick="actualitzarMissatgeAssertive()">Actualitza missatge (assertive)</button>
      <div aria-live="assertive" id="live-region-assertive" class="alert-box"></div>
      <div class="code-box">&lt;button class="btn" onclick="actualitzarMissatge()"&gt;Actualitza missatge (polite)&lt;/button&gt;
&lt;div aria-live="polite" id="live-region" class="alert-box"&gt;&lt;/div&gt;
&lt;button class="btn" onclick="actualitzarMissatgeAssertive()"&gt;Actualitza missatge (assertive)&lt;/button&gt;
&lt;div aria-live="assertive" id="live-region-assertive" class="alert-box"&gt;&lt;/div&gt;

let comptador = 0;
function actualitzarMissatge() {
    const liveRegion = document.getElementById('live-region');
    comptador++;
    // Alterna el missatge afegint o traient un espai al final
    if (comptador % 2 === 1) {
        liveRegion.textContent = 'El contingut s\'ha actualitzat correctament!\u00A0';
    } else {
        liveRegion.textContent = 'El contingut s\'ha actualitzat correctament!';
    }
    liveRegion.hidden = false;
}

let comptadorAssertive = 0;
function actualitzarMissatgeAssertive() {
    const liveRegion = document.getElementById('live-region-assertive');
    comptadorAssertive++;
    if (comptadorAssertive % 2 === 1) {
        liveRegion.textContent = 'Missatge assertive actualitzat!\u00A0';
    } else {
        liveRegion.textContent = 'Missatge assertive actualitzat!';
    }
    liveRegion.hidden = false;
}</div>
    </section>

    <!-- Exemple 6: aria-required -->
    <section class="card">
      <h2>Exemple 6: <code>aria-required</code></h2>
      <p>
        <code>aria-required="true"</code> indica que un camp √©s obligatori, encara que no tingui l'atribut <code>required</code> HTML.
      </p>
      <form>
        <label for="nom-req">Nom:</label>
        <input id="nom-req" aria-required="true" />
      </form>
      <div class="code-box">&lt;input id="nom-req" aria-required="true" /&gt;</div>
    </section>

    <!-- Exemple 7: aria-disabled -->
    <section class="card">
      <h2>Exemple 7: <code>aria-disabled</code></h2>
      <p>
        <code>aria-disabled="true"</code> indica que un element est√† desactivat per a tecnologia assistiva, encara que no tingui l'atribut <code>disabled</code> HTML.
        En aquest cas l'item no ser√† tabulable ja que deixa de ser interactuable. 
      </p>
      <div class="btn" role="button" aria-disabled="true" style="opacity:0.5; pointer-events:none;">Bot√≥ desactivat</div>
      <div class="code-box">&lt;div class="btn" role="button" aria-disabled="true" &gt;Bot√≥ desactivat&lt;/div&gt;</div>
    </section>

    <!-- Exemple 8: aria-haspopup amb role="menuitem" i navegaci√≥ per fletxes -->
    <section class="card">
      <h2>Exemple 8: <code>aria-haspopup</code> i <code>role="menuitem"</code> amb navegaci√≥ per fletxes</h2>
      <p>
        <code>aria-haspopup="true"</code> indica que el bot√≥ obre un men√∫, di√†leg o llista desplegable.<br>
        Si s'utilitza <code>role="menuitem"</code>, cal permetre la navegaci√≥ amb fletxes.
      </p>
      <button class="btn" aria-haspopup="true" aria-controls="menu-exemple" aria-expanded="false" onclick="toggleMenuExemple(this)">
        Mostra men√∫ <i class="fas fa-caret-down"></i>
      </button>
      <div id="menu-exemple" role="menu" style="display:none; margin-top:0.5em; background:#fff; border:1px solid #ccc; border-radius:4px; min-width:160px; box-shadow:0 2px 8px #0002; padding:0.3em 0;">
        <button role="menuitem" class="menuitem-btn" tabindex="0">Opci√≥ 1</button>
        <button role="menuitem" class="menuitem-btn" tabindex="-1">Opci√≥ 2</button>
        <button role="menuitem" class="menuitem-btn" tabindex="-1">Opci√≥ 3</button>
      </div>
      <div class="code-box">&lt;button aria-haspopup="true" aria-controls="menu-exemple" aria-expanded="false"&gt;Mostra men√∫&lt;/button&gt;
&lt;div id="menu-exemple" role="menu"&gt;
  &lt;button role="menuitem" tabindex="0"&gt;Opci√≥ 1&lt;/button&gt;
  &lt;button role="menuitem" tabindex="-1"&gt;Opci√≥ 2&lt;/button&gt;
  &lt;button role="menuitem" tabindex="-1"&gt;Opci√≥ 3&lt;/button&gt;
&lt;/div&gt;</div>
    </section>

    <!-- Exemple 9: aria-checked -->
    <section class="card">
      <h2>Exemple 9: <code>aria-checked</code></h2>
      <p>
        <code>aria-checked</code> s'utilitza per indicar l'estat d'elements tipus checkbox, radio o botons toggle personalitzats.
      </p>
      <button class="checkbox-btn" id="toggle-checked" role="checkbox" aria-checked="false" onclick="toggleCheckedExemple(this)">
        <span class="checkbox-icon" aria-hidden="true"></span>
        <span id="checked-label">Desactivat</span>
      </button>
      <div class="code-box">&lt;button role="checkbox" aria-checked="false" &gt;
  &lt;span class="checkbox-icon" aria-hidden="true"&gt;&lt;/span&gt;
  &lt;span&gt;Desactivat&lt;/span&gt;
&lt;/button&gt;</div>
    </section>
  </main>

  <footer>
    <p>¬© 2025 Formaci√≥ ARIA i Atributs</p>
  </footer>

  <script>
    // Exemple 5: aria-live
    let comptador = 0;
    function actualitzarMissatge() {
      const liveRegion = document.getElementById('live-region');
      comptador++;
      // Alterna el missatge afegint o traient un espai al final
      if (comptador % 2 === 1) {
        liveRegion.textContent = "El contingut s'ha actualitzat correctament!\u00A0";
      } else {
        liveRegion.textContent = "El contingut s'ha actualitzat correctament!";
      }
      liveRegion.hidden = false;
    }

    let comptadorAssertive = 0;
    function actualitzarMissatgeAssertive() {
      const liveRegion = document.getElementById('live-region-assertive');
      comptadorAssertive++;
      if (comptadorAssertive % 2 === 1) {
        liveRegion.textContent = "Missatge assertive actualitzat!\u00A0";
      } else {
        liveRegion.textContent = "Missatge assertive actualitzat!";
      }
      liveRegion.hidden = false;
    }

    // aria-haspopup exemple
    function toggleMenuExemple(btn) {
      const menu = document.getElementById('menu-exemple');
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', !expanded);
      menu.style.display = expanded ? 'none' : 'block';
      if (!expanded) {
        // Focus primer element del men√∫ quan s'obre
        setTimeout(() => {
          const firstItem = menu.querySelector('[role="menuitem"]');
          if (firstItem) firstItem.focus();
        }, 10);
      }
    }

    // aria-haspopup exemple + navegaci√≥ per fletxes
    function toggleMenuExemple(btn) {
      const menu = document.getElementById('menu-exemple');
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', !expanded);
      menu.style.display = expanded ? 'none' : 'block';
      if (!expanded) {
        // Focus primer element del men√∫ quan s'obre
        setTimeout(() => {
          const items = menu.querySelectorAll('[role="menuitem"]');
          if (items.length) {
            items.forEach((item, i) => item.tabIndex = i === 0 ? 0 : -1);
            items[0].focus();
          }
        }, 10);
      }
    }

    // Navegaci√≥ per fletxes per role="menuitem"
    document.addEventListener('DOMContentLoaded', function () {
      const menu = document.getElementById('menu-exemple');
      if (menu) {
        const items = menu.querySelectorAll('[role="menuitem"]');
        items.forEach((item, idx) => {
          item.addEventListener('keydown', (e) => {
            let nextIdx;
            if (e.key === 'ArrowDown') {
              nextIdx = (idx + 1) % items.length;
              items[nextIdx].focus();
              items.forEach((btn, i) => btn.tabIndex = i === nextIdx ? 0 : -1);
              e.preventDefault();
            } else if (e.key === 'ArrowUp') {
              nextIdx = (idx - 1 + items.length) % items.length;
              items[nextIdx].focus();
              items.forEach((btn, i) => btn.tabIndex = i === nextIdx ? 0 : -1);
              e.preventDefault();
            }
          });
        });
      }
    });

    // aria-checked exemple
    function toggleCheckedExemple(btn) {
      const checked = btn.getAttribute('aria-checked') === 'true';
      btn.setAttribute('aria-checked', !checked);
      document.getElementById('checked-label').textContent = checked ? 'Desactivat' : 'Activat';
    }
  </script>
</body>
</html>